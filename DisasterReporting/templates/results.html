{% extends "base.html" %}
{% block head %}
{% endblock %}
{% block body %}
<div id="map">
</div>
    <script type="text/javascript">
    var map;
    // Adds a marker to the map.
    function addMarker(latitude,longitude, map, label, title) {
        // Add the marker at the clicked location, and add the next-available label
        // from the array of alphabetical characters.
        var latlng = {lat: latitude, lng: longitude};
        var marker = new google.maps.Marker({
            position: latlng,
            label: label,
            map: map,
            title: title
        });
    }
    function initMap() {
        var myLatLng = {lat: {{ map_data.latitude }}, lng: {{map_data.longitude }}};

        map = new google.maps.Map(document.getElementById('map'), {
            zoom: {{ map_data.zoom }},
            center: myLatLng
        });
        {%  for lat,lng,map_label,label in map_data.locations %}
            addMarker({{ lat }},{{ lng }},map,'{{ map_label }}','{{ label }}');
        {% endfor %}

    }
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key={{ map_data.api_key }}&callback=initMap"
    async defer></script>
{% endblock %}
</html>